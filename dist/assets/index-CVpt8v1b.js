(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function e(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=e(r);fetch(r.href,i)}})();const $="https://api.binance.com/api/v3";function l(...t){console.log("[CW]",...t)}const G=3,K=1e4;async function V(t,o=G){for(let e=0;e<o;e++)try{const n=new AbortController,r=setTimeout(()=>n.abort(),K),i=await fetch(t,{signal:n.signal});if(clearTimeout(r),!i.ok)throw new Error(`HTTP ${i.status}`);const s=await i.json();return l("Binance fetch OK:",t.split("?")[0]),s}catch(n){if(l(`Binance fetch attempt ${e+1} failed:`,n.message),e===o-1)throw new Error("Failed to fetch Binance data. Please try again.");await new Promise(r=>setTimeout(r,1e3*(e+1)))}}async function O(){return await V(`${$}/ticker/24hr`)}function X(t){return t.filter(o=>o.symbol.endsWith("USDT")).filter(o=>!j(o.symbol))}function j(t){const o=t.replace("USDT","");return/UP$|DOWN$|BULL$|BEAR$/i.test(o)}function J(t){return[...t].sort((o,e)=>parseFloat(e.quoteVolume)-parseFloat(o.quoteVolume))}function Q(t,o=30){return J(X(t)).slice(0,o)}async function Y(t="BTCUSDT",o="1h",e=200){return(await V(`${$}/klines?symbol=${t}&interval=${o}&limit=${e}`)).map(r=>({time:r[0],open:parseFloat(r[1]),high:parseFloat(r[2]),low:parseFloat(r[3]),close:parseFloat(r[4]),volume:parseFloat(r[5]),closeTime:r[6]}))}function A(t){if(t==null||isNaN(t))return"0.00";const o=Number(t);return o>=1e3?o.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):o>=1?o.toFixed(4):o>=.01?o.toFixed(6):o.toFixed(8)}function M(t){return t==null||isNaN(t)?"0.00%":(Number(t)>=0?"+":"")+Number(t).toFixed(2)+"%"}function g(t,o=document){return o.querySelector(t)}function Z(t){return t.replace("USDT","")}function tt(t){return{BTC:"bg-token-btc",ETH:"bg-token-eth",BNB:"bg-token-bnb",SOL:"bg-token-sol",XRP:"bg-token-xrp",ADA:"bg-token-ada",DOGE:"bg-token-doge",DOT:"bg-token-dot",AVAX:"bg-token-avax",MATIC:"bg-token-matic",LINK:"bg-token-link",UNI:"bg-token-uni",SHIB:"bg-token-shib",LTC:"bg-token-ltc",ATOM:"bg-token-atom",FIL:"bg-token-fil",APT:"bg-token-apt",ARB:"bg-token-arb",OP:"bg-token-op",NEAR:"bg-token-near",TRX:"bg-token-trx",PEPE:"bg-token-pepe",WIF:"bg-token-wif",SUI:"bg-token-sui"}[t]||"bg-token-default"}function et(){const t=document.querySelectorAll(".reveal-section");if(!t.length)return;document.body.classList.add("reveal-ready");const o=new IntersectionObserver(e=>{e.forEach(n=>{n.isIntersecting&&(n.target.classList.add("revealed"),window.gsap&&n.target.dataset.gsapReveal&&ot(n.target),o.unobserve(n.target))})},{threshold:.15,rootMargin:"0px 0px -50px 0px"});t.forEach(e=>o.observe(e)),l("Reveal observer initialized for",t.length,"sections")}function ot(t){const o=t.querySelectorAll(".reveal-item");o.length?gsap.from(o,{y:40,opacity:0,duration:.7,stagger:.12,ease:"power2.out"}):gsap.from(t,{y:40,opacity:0,duration:.7,ease:"power2.out"})}let I=!1,S=[],k="BTCUSDT",q="BTCUSDT",L=null,P=!1,E=null,C=null;function H(){return new Promise(t=>{if(window.gsap)return t(window.gsap);const o=setInterval(()=>{window.gsap&&(clearInterval(o),t(window.gsap))},50);setTimeout(()=>{clearInterval(o),t(null)},5e3)})}async function nt(){const t=await H();if(!t){l("GSAP not loaded, skipping animations");return}t.timeline({defaults:{ease:"power3.out"}}).from("#heroBadge",{y:30,opacity:0,duration:.6}).from("#heroTitle",{y:40,opacity:0,duration:.7},"-=0.3").from("#heroSub",{y:30,opacity:0,duration:.6},"-=0.35").from("#heroCtas",{y:20,opacity:0,duration:.5},"-=0.25").from("#heroRight",{x:60,opacity:0,duration:.8},"-=0.5").from("#heroTagline",{y:20,opacity:0,duration:.5},"-=0.3").from("#heroEmailForm",{y:20,opacity:0,duration:.5},"-=0.25"),t.to("#heroWidget",{y:-8,duration:2.5,repeat:-1,yoyo:!0,ease:"sine.inOut"}),t.to("#ctaCard",{boxShadow:"0 0 60px rgba(99, 102, 241, 0.3), 0 8px 32px rgba(0,0,0,0.5)",duration:2,repeat:-1,yoyo:!0,ease:"sine.inOut"}),l("Hero animations initialized")}async function D(){try{const t=await O(),o=["BTCUSDT","ETHUSDT","BNBUSDT","SOLUSDT"],e=document.querySelectorAll("#heroWidgetRows [data-widget-row]");o.forEach((n,r)=>{const i=t.find(f=>f.symbol===n);if(!i||!e[r])return;const s=e[r].querySelector("[data-widget-price]");s&&(s.textContent="$"+A(i.lastPrice));const d=parseFloat(i.priceChangePercent),u=e[r].querySelector("[data-widget-change]");u&&(u.textContent=M(d),u.classList.toggle("text-success",d>=0),u.classList.toggle("text-danger",d<0))}),l("Hero widget data loaded")}catch(t){l("Hero widget data failed:",t.message)}}function rt(){const t=g("#heroEmailForm");t&&t.addEventListener("submit",o=>{o.preventDefault();const e=g("#heroEmail").value.trim();e&&(window.location.href="./auth/signup.html?email="+encodeURIComponent(e))})}function it(t){t.querySelectorAll("[data-sea-row]").forEach(o=>o.remove()),S.forEach(o=>o.kill()),S=[]}async function at(){const t=await H();try{const o=g("#seaRows");if(!o){l("Crypto sea container missing");return}const e=g("#portfolioSection");e&&e.classList.remove("hidden"),it(o);const n=o.querySelector('[data-sea-fade="left"]'),r=o.querySelector('[data-sea-fade="right"]');if(!n||!r){l("Crypto sea fade layers missing");return}const i=await O(),s=Q(i,40);if(!s.length){l("No tickers for crypto sea");return}const d=4,u=Math.ceil(s.length/d);for(let f=0;f<d;f++){const m=document.createElement("div");m.className="flex gap-4 overflow-hidden relative py-2",m.dataset.seaRow="true";const a=document.createElement("div");a.className="flex gap-4 will-change-transform";const v=f*u,w=Math.min(v+u,s.length),y=s.slice(v,w);if([...y,...y].forEach(c=>{const h=Z(c.symbol),p=parseFloat(c.priceChangePercent),b=document.createElement("div");b.className="flex items-center gap-2 py-3 px-5 bg-bg-card border border-border rounded-cw-md whitespace-nowrap shrink-0 transition-colors duration-300 cursor-default hover:border-border-hover hover:bg-bg-card-hover";const x=p>=0?"text-success":"text-danger";b.innerHTML=`
          <div class="${tt(h)} w-7 h-7 rounded-full flex items-center justify-center font-bold text-xs-7 text-white">${h.slice(0,2)}</div>
          <span class="text-xs-88 font-semibold text-text-primary">${h}</span>
          <span class="text-xs-82 text-text-secondary ml-2">$${A(c.lastPrice)}</span>
          <span class="text-xs-78 font-semibold ml-1 ${x}">${M(p)}</span>
        `,a.appendChild(b)}),m.appendChild(a),o.insertBefore(m,n),t){const c=a.scrollWidth/2,h=40+f*8,p=c/h,b=f%2===0?-1:1;b===1&&t.set(a,{x:-c});const x=t.timeline({repeat:-1});x.to(a,{x:b===-1?-c:0,duration:p,ease:"none"}),S.push(x),m.addEventListener("mouseenter",()=>x.pause()),m.addEventListener("mouseleave",()=>x.resume())}}l("Crypto sea initialized with",s.length,"tokens")}catch(o){l("Crypto sea error:",o.message);const e=g("#portfolioSection");e&&e.classList.remove("hidden")}}function _(){try{C&&typeof C.remove=="function"&&C.remove()}catch(o){l("TradingView destroy warning:",o.message)}C=null;const t=g("#tvChart");t&&(t.innerHTML="")}function st(){return window.TradingView?Promise.resolve():E||(E=new Promise((t,o)=>{const e=document.querySelector('script[data-tradingview-script="true"]');if(e){if(window.TradingView){t();return}e.addEventListener("load",()=>t(),{once:!0}),e.addEventListener("error",()=>o(new Error("TradingView script failed to load")),{once:!0});return}const n=document.createElement("script");n.src="https://s3.tradingview.com/tv.js",n.async=!0,n.dataset.tradingviewScript="true",n.onload=()=>t(),n.onerror=()=>o(new Error("TradingView script failed to load")),document.head.appendChild(n)}),E)}async function R(t="BTCUSDT"){const o=g("#tvChart");if(!o)return;q=t,_();const e=document.createElement("div");e.id="tradingview_widget",e.className="w-full h-full",o.appendChild(e);const n=window.innerWidth<=480?320:window.innerWidth<=768?420:520;try{if(await st(),!window.TradingView)throw new Error("TradingView unavailable after script load");C=new window.TradingView.widget({container_id:"tradingview_widget",symbol:"BINANCE:"+t,interval:"60",timezone:"Etc/UTC",theme:"dark",style:"1",locale:"en",toolbar_bg:"#0a0e1a",enable_publishing:!1,hide_top_toolbar:!1,hide_legend:!1,save_image:!1,width:"100%",height:n,backgroundColor:"#0a0e1a",gridColor:"rgba(99, 102, 241, 0.06)"}),l("TradingView initialized:",t)}catch(r){l("TradingView init error:",r.message)}}function ct(){const t=g("#tvSymbolSelect"),o=g("#tvSymbolSearch"),e=g("#tvFullscreenBtn"),n=g("#tvContainer");t&&t.addEventListener("change",()=>{R(t.value)}),o&&o.addEventListener("keydown",r=>{if(r.key!=="Enter")return;const i=o.value.trim().toUpperCase();i&&R(i.includes("USDT")?i:i+"USDT")}),e&&n&&e.addEventListener("click",()=>{document.fullscreenElement?document.exitFullscreen():n.requestFullscreen().catch(()=>{})})}async function N(t=k){const o=g("#priceCanvas"),e=g("#volumeCanvas");if(!(!o||!e)){k=t;try{const n=await Y(t,"1h",200);lt(o,n),dt(e,n),l("Canvas charts rendered for",t)}catch(n){l("Canvas charts error:",n.message),U(o,"Failed to load price data"),U(e,"Failed to load volume data")}}}function lt(t,o){const e=t.getContext("2d"),n=window.devicePixelRatio||1,r=t.getBoundingClientRect();t.width=r.width*n,t.height=r.height*n,e.scale(n,n);const i=r.width,s=r.height,d=o.map(c=>c.close),u=Math.min(...d),f=Math.max(...d),m=f-u||1,a={top:20,bottom:30,left:10,right:10},v=i-a.left-a.right,w=s-a.top-a.bottom;e.fillStyle="transparent",e.fillRect(0,0,i,s),e.strokeStyle="rgba(99, 102, 241, 0.08)",e.lineWidth=1;for(let c=0;c<=4;c++){const h=a.top+w/4*c;e.beginPath(),e.moveTo(a.left,h),e.lineTo(i-a.right,h),e.stroke()}const y=e.createLinearGradient(0,a.top,0,s-a.bottom);y.addColorStop(0,"rgba(99, 102, 241, 0.8)"),y.addColorStop(1,"rgba(139, 92, 246, 0.8)"),e.strokeStyle=y,e.lineWidth=2,e.lineJoin="round",e.beginPath(),d.forEach((c,h)=>{const p=a.left+h/(d.length-1)*v,b=a.top+w-(c-u)/m*w;h===0?e.moveTo(p,b):e.lineTo(p,b)}),e.stroke();const T=e.createLinearGradient(0,a.top,0,s-a.bottom);T.addColorStop(0,"rgba(99, 102, 241, 0.15)"),T.addColorStop(1,"rgba(99, 102, 241, 0.01)"),e.lineTo(a.left+v,s-a.bottom),e.lineTo(a.left,s-a.bottom),e.closePath(),e.fillStyle=T,e.fill(),e.fillStyle="#6b7194",e.font="11px Inter, sans-serif",e.textAlign="right";for(let c=0;c<=4;c++){const h=f-m/4*c,p=a.top+w/4*c;e.fillText("$"+A(h),i-a.right-4,p-4)}}function dt(t,o){const e=t.getContext("2d"),n=window.devicePixelRatio||1,r=t.getBoundingClientRect();t.width=r.width*n,t.height=r.height*n,e.scale(n,n);const i=r.width,s=r.height,d=o.map(w=>w.volume),u=Math.max(...d),f={top:20,bottom:30,left:10,right:10},m=i-f.left-f.right,a=s-f.top-f.bottom,v=Math.max(1,m/d.length-1);e.fillStyle="transparent",e.fillRect(0,0,i,s),d.forEach((w,y)=>{const T=w/u*a,c=f.left+y/d.length*m,h=f.top+a-T,p=o[y].close>=o[y].open;e.fillStyle=p?"rgba(34, 197, 94, 0.5)":"rgba(239, 68, 68, 0.5)",e.fillRect(c,h,v,T)})}function U(t,o){const e=t.getContext("2d"),n=window.devicePixelRatio||1,r=t.getBoundingClientRect();t.width=r.width*n,t.height=r.height*n,e.scale(n,n),e.fillStyle="#6b7194",e.font="14px Inter, sans-serif",e.textAlign="center",e.fillText(o,r.width/2,r.height/2)}function ut(){z(),L=setInterval(async()=>{if(!(document.hidden||P)){P=!0;try{await N(k)}finally{P=!1}}},5e3)}function z(){L&&(clearInterval(L),L=null)}function ft(){const t=g("#chartSymbolSelect");t&&t.addEventListener("change",()=>{N(t.value)})}function ht(){z(),_(),S.forEach(t=>t.kill()),S=[]}async function W(){I||(I=!0,l("Landing page initializing..."),rt(),nt(),et(),D(),at(),await R(q),ct(),await N(k),ft(),ut(),setInterval(()=>{document.hidden||D()},1e4),window.addEventListener("beforeunload",ht,{once:!0}),l("Landing page initialization complete"))}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",W):W();const gt="/footer.html";function B(t){return(t||"/").split("?")[0].split("#")[0]}function mt(t){const o=B(t).split("/").filter(Boolean);return o.length?o[o.length-1].includes("."):!1}function pt(t,o){const e=B(t).split("/").filter(Boolean),n=B(o).split("/").filter(Boolean),r=mt(t)?e.slice(0,-1):e;let i=0;for(;i<r.length&&i<n.length&&r[i]===n[i];)i+=1;const s=Array(Math.max(0,r.length-i)).fill(".."),d=n.slice(i),u=[...s,...d].join("/");return u?u.startsWith(".")||u.startsWith("..")?u:`./${u}`:"./"}function wt(t){if(!t)return;const o=window.location.pathname;t.querySelectorAll("[data-cw-href]").forEach(e=>{const n=e.getAttribute("data-cw-href");n&&e.setAttribute("href",pt(o,n))})}let F;function yt(){return F||(F=fetch(gt).then(t=>{if(!t.ok)throw new Error(`Footer fetch failed: ${t.status}`);return t.text()})),F}class bt extends HTMLElement{async connectedCallback(){var o,e;if(this.dataset.loaded!=="true")try{const n=await yt();this.innerHTML=n,this.dataset.loaded="true",wt(this);const r=this.querySelector("footer");r&&((e=(o=document.body)==null?void 0:o.dataset)==null?void 0:e.hasBottomNav)==="true"&&r.classList.add("max-md:pb-[calc(32px+56px)]")}catch(n){console.error("[CW] Footer load error:",n),this.remove()}}}customElements.get("cw-footer")||customElements.define("cw-footer",bt);function vt(){if(!window.CW_DEBUG_FOOTER)return;const t=document.querySelectorAll("header, main, section, footer, .app-layout, .auth-page"),o=["outline","outline-1","outline-dashed","outline-accent/60"];t.forEach(e=>{e.classList.add(...o);const n=e.getBoundingClientRect();console.log("[CW] Layout",e.tagName,e.className,Math.round(n.height))})}window.addEventListener("load",()=>{requestAnimationFrame(vt)});
